# Autocomplete Plugin

Create a trie base autocomplete that allows to offer autocompletion

## Usage
Once the autocomplete is initialized to get an autocomplete for a given string simply call:

```javascript
autocomplete.get("poker")
```

This will return you an array of objects:

```javascript
[
    {"w": "elie",
     "s": 42,
     "d": 3
    },
    {"w": "elie bursztein",
     "s": 34,
     "d": 2
    },
    ...
]
```
where `w` is the completed word, `s` is the relevance score (higher == more relevant), `d` is the number of documents the word was found.

### Page example

Here is a simple search page that show the autocompletion via an inputbox:

```html

<html>
    <head>
        <script src="static/js/autocomplete.js"></script>
    </head>
    <body>
        <input id="searchbox" type="search" value="" placeholder="search" size="30">
        <div id="search_results"></div>


        <script>

            var autocomplete = new Autocomplete();
            //this can be optimized by doing it server side.
            autocomplete.load_data(trie_data); //trie_data is generated by sitefab
            var search_box = document.getElementById(search_box_id);

            //suggest
            search_box.onkeyup = function (e) {
                var query = search_box.value;
                suggestions = autocomplete.get(query);
                html = "<ul>";
                for (var i = 0; suggestions[i]; i++){
                    suggestion = suggestions[i];
                    html += "<li>" + suggestion.w + "</li>";
                }
                html += "</ul>";
                search_results.innerHTML = html;
            }
        </script>

    </body>
</html>

```

## Scoring

Score are computed server side. Basically the fomula is 

```math
frequency * num_document * document_coeff
```

Where document coeff is 10 by default. Frontmatter fields get their frequency multiplied by 10 to ensure they are the most represented.




Note you most likely want to use glup to preload the trie data.
FIXME glup example.

## Changelog
- 05/29/17
 - Fixed speed issue
 - Added better scoring to ensure autocompletion include all the needed term
 - Properly handle authors, conferences and tags
- 05/28/17
  - Intial version

## Credits

**Author**: Elie Bursztein
